# Config file for automatic testing at travis-ci.org
env:
  global:
    - OPENSSL=1.1.1f
    - OPENSSL_DIR="$HOME/multissl/openssl/${OPENSSL}"
    - PATH="${OPENSSL_DIR}/bin:$PATH"
    - CFLAGS="-I${OPENSSL_DIR}/include"
    - LDFLAGS="-L${OPENSSL_DIR}/lib"
    # Set rpath with env var instead of -Wl,-rpath linker flag
    # OpenSSL ignores LDFLAGS when linking bin/openssl
    - LD_RUN_PATH="${OPENSSL_DIR}/lib"
    - sh python_interpreter.sh
    - /opt/python380-amd64/python3.8
    - sudo sh python_interpreter.sh

language: python

install: "pip install -r requirements.txt"

script:
  - python test.py
  
after_success:
  - codecov
